tags:
  - name: Role
    description: Role Module.

paths:
  /api/v1/roles:
    post:
      summary: Create a new role
      description: Creates a new user role. Access is restricted to Admin.
      tags: [Role]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - role_name
              properties:
                role_name:
                  type: string
                  description: Unique name for the role (e.g., 'customer', 'merchant', 'admin').
                  example: "editor"
                guard_name:
                  type: string
                  description: Optional guard name (e.g., 'web', 'api').
                  nullable: true
                  example: "web"
                description:
                  type: string
                  description: A brief description of the role's purpose.
                  example: "Can edit and publish content."
      responses:
        "201":
          description: Role created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  role:
                    $ref: '#/components/schemas/Role'
        "400":
          description: Role already exists
        "500":
          description: Server error

    get:
      summary: Get all roles
      description: Retrieves a list of all roles, including soft-deleted ones (for admin view). Excludes the list of associated users.
      tags: [Role]
      security:
        - BearerAuth: []
      responses:
        "200":
          description: List of all roles retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Role'
        "500":
          description: Server error

  /api/v1/roles/active:
    get:
      summary: Get only active roles
      description: Retrieves a list of roles that have not been soft-deleted (`deleted_at` is null). Excludes the list of associated users.
      tags: [Role]
      security:
        - BearerAuth: []
      responses:
        "200":
          description: List of active roles retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Role'
        "500":
          description: Server error

  /api/v1/roles/{id}:
    patch:
      summary: Update role by ID
      description: Updates the name, guard name, or description of a specific role.
      tags: [Role]
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            description: The MongoDB ID of the role.
            example: "60c728b792e3a10015b6d5f7"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                role_name:
                  type: string
                  example: "content_editor"
                guard_name:
                  type: string
                  example: "api"
                description:
                  type: string
                  example: "Can manage blog posts."
      responses:
        "200":
          description: Role updated successfully
        "404":
          description: Role not found
        "500":
          description: Server error

    delete:
      summary: Soft-delete role by ID
      description: Performs a soft deletion on the role by setting the `deleted_at` timestamp.
      tags: [Role]
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
            description: The MongoDB ID of the role.
            example: "60c728b792e3a10015b6d5f7"
      responses:
        "200":
          description: Role deleted (soft) successfully
        "404":
          description: Role not found
        "500":
          description: Server error

components:
  schemas:
    Role:
      type: object
      properties:
        _id:
          type: string
          example: "60c728b792e3a10015b6d5f7"
        role_name:
          type: string
          example: "admin"
        guard_name:
          type: string
          nullable: true
          example: "web"
        description:
          type: string
          example: "Super user with full system access."
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        deleted_at:
          type: string
          format: date-time
          nullable: true
          description: Timestamp if the role has been soft-deleted.